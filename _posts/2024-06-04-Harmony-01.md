---
layout: post
title: 鸿蒙开发-01.md
date: 2024-06-04 16:45:30.000000000 +09:00
categories: [鸿蒙, ArkTS]
tags: [鸿蒙, ArkTS]
---


# 一、ArkTS 入门

## 1 常见的三种数据类型

```typescript
// 1. 字符串 string 类型
// 字符串使用 单引号或双引号
let title: string = '巨无霸汉堡'
console.log('字符串', title)

// 1.2. 数字 number 类型
let age: number = 18
console.log('年龄', age)

// 1.3 布尔 boolean
let isLogin: boolean = false
console.log('是否登录成功', isLogin)

age = 81
console.log('年龄', age)
```

## 2 常量使用 const

* 变量命名规则：
 1. 只能包含数字、字母、下划线、$, 不能以数字开头
 2. 常量用 const，变量用 let
 3. 严格区分大小写

```typescript
const PI: number = 3.1415926
console.log('PI:', PI)

const companyName: string = 'HUAWEI'
console.log('公司名称', companyName)
```

## 3 数组：可存储多个数据
* 格式：`let 数组名: 类型[] = [数据1, 数据2]`
* Note：数组声明好的类型，后面存储的数据必须和他一致

```typescript
let names: string[] = ['小李', '小王']
console.log('names：', names)
console.log('1号：', names[1])
```

## 4 函数

```typescript
function buy(price: number, num: number) {
  let total: number = price * num
  return total
}

let apple = buy(2, 3)
console.log('Apple:', apple)
```

## 5 箭头函数
* `() => {}` 这是一个箭头函数

```typescript
let buy = (price: number, num: number) => {
  let total: number = price * num
  return total
}
let apple2 = buy(2, 3)
console.log('Apple2:', apple)
```

## 6 对象
* 通过 interface 接口约定 对象结构类型


```typescript
/*
    格式：
    interface 接口名称 {
      属性名: 类型
      方法名: (参数: 类型) => 返回类型
    }
 */

// 6.1 定义接口
interface Person {
  // 定义属性
  name: string
  age: number
  weight: number        // 定义时不需要逗号

  // 定义方法类型
  sing: (songName: string) => void
  dance: () => void
}

// 6.2 创建对象
let tom: Person = {
  name: 'tom',
  age: 18,
  weight: 90,            // 创建对象时才需要逗号

  sing: (songName: string) => {
    console.log('singing the ', songName)
  },
  dance: () => {
    console.log('dancing')
  }

}

// 6.3 获取属性名
console.log('体重：', tom.weight)

// 6.4 调用方法
tom.sing('haha')
```

## 7 联合类型
* `语法：let 变量: 类型1 | 类型2 | 类型3 = 值`

```typescript
let judge: number | string = 100
console.log('考试评价：', judge)
judge = 'A+'
console.log('考试评价：', judge)
```

* 联合类型还可以将变量值约定在一组数据范围内进行选择

```typescript
let gender: 'man' | 'woman' | 'secret' = 'man'
console.log('gender：', gender)
```

## 8 枚举类型
* 枚举名和枚举变体首字母大写

```typescript
// 定义枚举
enum ThemeColor {
  Red = '#ff0f29',
  Orange = '#ff7100',
  Green = '#30b30e'
}

let color: ThemeColor = ThemeColor.Red
console.log('color ', color)
```

# 二、界面开发
# 1 往 `build` 里写代码，在`预览器`中看效果

```typescript
// index.ets

@Entry
@Component
struct Index {
  @State message: string = 'Hello world';

  build() {
    // 行
    Row() {
      // 列
      Column() {
        // 文本 函数名(参数)
        Text(this.message)
          .fontSize(40)                // 设置字号
          .fontWeight(FontWeight.Bold) // 设置字重
          .fontColor(Color.Green)      // 设置文本颜色
      }
      .width('100%')
    }
    .height('100%')
  }
}
```
 
## 2 界面开发-布局思路
* ArkUI（方舟开发框架）：是一套构建鸿蒙应用界面的框架
* 在 ArkUI 中构建页面的最小单位是 `组件`

### 组件的分类
1. 基础组件：界面呈现的基本元素，例如文本（Text）、图片、按钮等
2. 容器组件：控制布局排布，例如 Row（行）、Column（列）等

> 布局思路：先排版，再放内容。从上往下布局用 `Column`，从左往右用 `Row`
{: .prompt-info }

![image](/assets/harmony/layout.png)

> Note：`build()` 中有且只能有一个根组件，该组件必须是`容器组件`
{: .prompt-info }

### 组件的属性方法
![image](/assets/harmony/component_func.png)

```typescript
@Entry
@Component
struct Index {
  @State message: string = 'Hello world';
  build() {
    // > 从上往下布局用 Column，从左往右用 Row
    // > Note：`build()` 中有且只能有一个`容器组件`
    Column() {
      // 默认 Text 和 Row 是从左往右展示的，而其居中显示是因为没有设置宽度
      Text('小说简介')
        .width('100%')
        // .backgroundColor(Color.Grey)
        .height(40)
        .fontSize(24)
        .fontWeight(700) // 100~900 数字，越大越粗
        // .fontWeight(FontWeight.Bold)
      Row() {
        Text('都市')
          .width(50)
          .height(30)
          .backgroundColor(Color.Orange)
        Text('生活')
          .width(50)
          .height(30)
          .backgroundColor(Color.Yellow)
        Text('情感')
          .width(50)
          .height(30)
          .backgroundColor(Color.Pink)
        Text('克苏鲁')
          .width(50)
          .height(30)
          .backgroundColor(Color.Green)
      }
      .width('100%')
    }
    // width 的百分比就相当于向对父级来计算的，如果没有父级就相对于整行计算
    .width('100%')
    // 百分比需要用引号，数字直接写就行
    // .width(200)
    // .backgroundColor(Color.Pink)
  }
}
```


### 字体颜色
* 语法 1：`.fontColor(Color.Red)` 
* 语法 2：`.fontColor('#df3cef')`

```typescript
@Entry
@Component
struct Index {
  build() {
    Column() {
      Text('诸葛亮')
        .fontColor(Color.Green)
        .fontSize(24)
        .height(40)
        .width('100%')

      Row() {
        Text('置顶')
          .fontColor('#DF3C50')
          .width(40)
        Text('学院')
          .fontColor('#00a1a1')
          .width(40)
        Text('3999评论')
          .fontColor('#0f3c5f')
      }
      .width('100%')
    }

  }
}
```

> 构建界面的核心思路：先排版（横还是竖）-> 再内容 -> 然后美化
{: .prompt-info }


### 文字溢出省略号、行高

![image](/assets/harmony/textoverflow.png)


```typescript
@Entry
@Component
struct Index {
  build() {
    Column() {
      Text('HarmonyOS 开发')
        .width('100%')
        .fontColor(Color.Black)
        .fontSize(24)
        .lineHeight(50)
        .fontWeight(FontWeight.Bold)

      Text('学习基础知识：学习 TypeScript 的不同类型和类型运算符，' +
        '了解其作用和用法。 探讨高级话题：理解 TypeScript 复杂的类型系统，' +
        '学习如何安全地处理错误和构建异步程序。 ' + '联系实际应用：' +
        '在你钟爱的前后端框架中使用 TypeScript，' +
        '把现有的 JavaScript 项目迁移到 TypeScript，' +
        '以及在生产环境中运行 TypeScript 应用。')
        .width('100%')
        .lineHeight(24)
        .textOverflow({
            overflow: TextOverflow.Ellipsis
        })
        // 必须配合 maxLines 才有效果
        // 如果设置 overflow: TextOverflow.MARQUEE 则 maxLines 就没有用了
        .maxLines(3)
    }
    .width('100%')
  } 
}
```

> `textOverflow` 必须配合 `maxLines` 才有效果。但如果设置 `overflow: TextOverflow.MARQUEE` 则 `maxLines` 就没有用了。
{: .prompt-info }


### Image 图片组件
1. 网络图片: `Image('https://www.itheima.com/images/logo.png')`
2. 本地图片, 本地图片一般放在 entry/src/main/resources/base/media/，`Image($r('app.media.文件名'))`

```typescript
@Entry
@Component
struct Index {
  @State message: string = 'Hello world';
  build() {
    Column() {
      // 1. 网络图片
      Image('https://www.itheima.com/images/logo.png')
        .width(200) // 给宽或高后，会自适应
      Text('logo!!!')
        .width(200)
      Row() {
        // 2. 本地图片
        Image($r('app.media.icon'))
          .width(50)
        Text('logo!!!')
          .width(200)
      }
      .width(200)
    }
  }
}
```


### 输入框与按钮组件

```typescript
// 输入框：TextInput(参数对象)
// 参数对象: placeholder 提示文本
// 属性方法: .type(InputType.xxx) 设置输入框 type 类型
//   type 值:
//      Normal: 基本输入模式，无特殊限制
//      Password: 密码输入模式

// 按钮：
// Button('按钮文本')

@Entry
@Component
struct Index {
  build() {
    // 调整组件间距：space 设置 Column 中子元素的间距
    Column({ space: 20 }) {
      TextInput({
        placeholder: '请输入用户名'
      })

      TextInput({
        placeholder: '请输入密码'
      }).type(InputType.Password)

      Button('登录')
        .width(200)
    }
  }
}
```


### 组件练习

```typescript
// 组件练习
/*
    构建界面思路：
    * 1 排版（分析布局）
    * 2 内容（基础组件）
    * 3 美化（属性方法）
 */


@Entry
@Component
struct Index {
  build() {
    Column({ space: 20 }) {

      Image($r('app.media.app_icon'))
        .width(50)

      TextInput({
        placeholder: '请输入用户名'
      })

      TextInput({
        placeholder: '请输入密码'
      }).type(InputType.Password)

      Button('登录')
        .width('100%')

      Row({ space: 15 }) {
        Text('前往注册')
        Text('忘记密码')
      }
    }
    .width('100%')
    .padding(40) // Note: 设置 Column 组件 edgeInsets
  }
}
```


### svg 图标


```typescript
// svg 使用
// svg 官方图片库 https://developer.huawei.com/consumer/cn/design/harmonyos-icon/
// svg 特点：
//   1. 任意放大缩小不失真
//   2. 可以修改颜色


@Entry
@Component
struct Index {
  build() {
    Column({ space: 20 }) {
      // svg 图片
      Image($r('app.media.ic_gallery_create'))
        .width(100)
        .fillColor('#584fde') // 修改 svg 颜色

      Image($r('app.media.ic_gallery_create'))
        .width(100)
        .fillColor('#247058')


    }
    .width('100%')
    .padding(40) // 设置 Column 组件 edgeInsets
  }
}
```


## 3 布局元素的组成

### 布局元素组成
1. 内边距 padding
2. 外边距 margin
3. 边框 border
4. 内容区域

![image](/assets/harmony/layout2.png)


### 1 内边距 padding

![image](/assets/harmony/padding.png)


```typescript
/*
  内边距 padding
  作用：在组件内添加 insets，拉开内容与组件边缘之间的间距
 */

@Entry
@Component
struct Index {
  build() {
    Column() {
      Text('蒙葛特')
        .backgroundColor(Color.Pink)
        // .padding(50)
        .padding({
          top: 20,
          left: 10,
          right: 15,
          bottom: 30
        }) // 四个方向设置不同的间距
    }
  }
}
```


### 2 外边距 margin
* 作用： 在组件外添加间距，用于拉开两个组件之间的距离

![image](/assets/harmony/margin.png)

```typescript
@Entry
@Component
struct Index {
  build() {
    Column() {
      // 2. margin
      Row() {
        Text('曹操')
          .backgroundColor(Color.Orange)
          .margin({
            left: 10,
            right: 20
          })
        Text('满宠')
          .backgroundColor(Color.Green)
          // .margin(30) // 设置 4 个方向的外边距
          .margin({
            left: 30,//Note: 这里 left 会和 `曹操` 的 margin.left 叠加
            right: 20
          }) // 设置不同方向的 margin

        Text('赵云')
          .backgroundColor(Color.Gray)

      }

      Column() {
        Text('曹操')
          .backgroundColor(Color.Orange)
          .margin({
            top: 10,
            bottom: 20
          })
        Text('满宠')
          .backgroundColor(Color.Green)
            // .margin(30) // 设置 4 个方向的外边距
          .margin({
            top: 30,//Note: 这里 left 会和 `曹操` 的 margin.left 叠加
            bottom: 20
          }) // 设置不同方向的 margin

        Text('赵云')
          .backgroundColor(Color.Gray)

      }
    }
  }
}
```

### 练习案例

```typescript
@Entry
@Component
struct Index {
  build() {
    Column() {
      Image($r('app.media.ic_gallery_create'))
        .width(100)
        .fillColor('#ff5860')
        .margin({
          bottom: 20
        })

      Text('直面天命')
        .fontSize(20)
        .fontWeight(FontWeight.Bold)
        .margin({
          bottom: 60
        })

      Button('登录1')
        .width('100%')
        .margin({
          bottom: 20
        })

      Button('登录2')
        .width('100%')
        .backgroundColor('#ddd')
        .fontColor('#000')
    }
    .width('100%')
    .padding(30)
  }
}
```

### 3 边框 border

![image](/assets/harmony/border.png)


```typescript
@Entry
@Component
struct Index {
  build() {
    Column() {
      Text('未发货')
        .padding(5)
        .border({
          width: 1, // 宽度（必须设置）
          color: Color.Red,  // 颜色
          style: BorderStyle.Dashed // 样式
        })
        .margin({
          bottom: 30
        })

      Text('单边框')
        .padding(5)
        // 可根据 left right top bottom 设置 4 个方向的边框
        .border({
          width: { left: 1, right: 2},
          color: Color.Red,
          style: { left: BorderStyle.Solid, right: BorderStyle.Dotted}
        })
    }
    .padding(20)
  }
}
```

## 4 圆角

### 4.1 设置组件圆角

* 属性: .borderRadius(参数)
* 参数：数值或对象 
  - topLeft
  - topRight
  - bottomLeft
  - bottomRight


```typescript
@Entry
@Component
struct Index {
  build() {
    Column() {
      Text('圆角语法-统一数值')
        .width(100)
        .height(60)
        .backgroundColor(Color.Pink)
        .borderRadius(5) // 4个角圆角相同
        .margin({
          bottom: 30
        })

      Text('圆角语法-对象')
        .width(100)
        .height(60)
        .backgroundColor(Color.Pink)
        .borderRadius({
          topLeft: 10,
          topRight: 20,
          bottomLeft: 30,
          bottomRight: 40
        })

      Text('VIP')
        .width(100)
        .height(60)
        .backgroundColor(Color.Orange)
        .borderRadius({
          topLeft: 20,
          bottomRight: 20
        })
        .padding(20)

    }
    .padding(20)
  }
}
```


### 4.2 特殊形状的圆角设置

```typescript
@Entry
@Component
struct Index {
  build() {
    Column() {
      // 1 正圆 (头像)
      Image($r('app.media.startIcon'))
        .width(100)
        .height(100)      // 宽高一样
        .borderRadius(50) // 圆角为高度的一半
        .padding(5)
        .backgroundColor(Color.Pink)
        .margin({
          bottom: 30
        })
 
      // 2 胶囊按钮
      Text('今天还没打开~')
        .height(50)
        .borderRadius(25)
        .backgroundColor(Color.Pink)
        .width(200)

    }
    // .backgroundColor(Color.Black)
    .width('100%')
    .padding(30)
  }
}
```

## 5 背景属性

### 5.1 背景图片
