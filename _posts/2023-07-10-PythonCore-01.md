---
layout: post
title: PythonCore-01
date: 2023-07-10 16:45:30.000000000 +09:00
categories: [Python]
tags: [Python]
---

# 第二章

## 1 print
* %s 表示由字符串替换
* %d 表示由整型替换
* %f 表示由浮点数替换

```python
print("%s is number %d!"%("python", 1))
```

## 2 raw_input() 内建函数

```python
num = raw_input('enter a number: ')
print('double you number is %d' %s (int(num) * 2))
```

## 3 help(函数) 获得帮助

## 4 操作符

* / 传统除法

> // 用于浮点数除法，对结果四舍五入, 真正的除法
{: .prompt-info }

* <> 等价于 不等于 !=
* and or not

> Python 变量名是大小写敏感的。不支持自增 自减运算
{: .prompt-info }

## 5 数字
* 有符号整型 包括 长整型 和布尔
* 浮点值
* 复数，包括 -1 的平方根 即所谓的虚数

* 长整型后缀有 L，但长整型和整型逐步统一了

> 布尔特殊的整型，True 当成整型 1，False 当成整型 0
{: .prompt-info }

## 6 字符串
* 可以用单引号、双引号、三引号

> 第一个字符的索引是 0，最后一个字符索引是 -1
{: .prompt-info }

* + 用于字符串连接运算。* 号用于字符串重复
* 切片[:]

```python
pystr = 'Python'
print(pystr[2:5])
pystr ='''python
is
python'''
print(pystr)
```

## 7 列表与元组
* 类似数组，但列表和元组可以存储不同类型的对象
* 列表用 [], 元素个数和元素值可以改变
* 元素用 (), 不可以改变，可以看成是只读的列表

```python
list = [1, 2, 3]
print(list)

tuple = ('abc', 1, 2)
print(tuple)
# tuple[0] = 'aa'  // error
```

## 8 字典
* 原理类似 Perl 中的关联数组或哈希表

> 几乎所有 Python 对象都可以成为 key，但一般数字或字符串最常用，value 可以是任意类型对象。
{: .prompt-info }

### 用 {}

```python
dict = {'host': 'earth'}
print(dict)
for key in dict:
    print(key)
```

## 9 缩进
* 使用缩进对齐表达代码逻辑

## 10 条件控制

> 表达式为非 0 或 True 则代码进入 if 或 while
{: .prompt-info }

## 10 for 循环

```python
for item in [1, 2, 3, 4]:
    print(item)

for num in range(3):
    print(num)

for c in 'abc':
    print(c)

for i, c in enumerate('abc'):
    print('i=%d, c=%s' % (i, c))
```

## 11 列表解析

```python
square = [x ** 2 for x in range(4)]
square = [x ** 2 for x in range(8) if not x % 2]
square = [x ** 2 for x in range(8) if x > 2]

for i in square:
    print(i)
```

## 11 文件

```python
handle = open('1.txt', mode= 'r')
```

* mode：'r' 表示读取，'w' 表示写入，'a' 表示添加, 'b' 表示二进制访问
* 如果成功 open 返回一个文件对象句柄

```python
for eachline in handle:
    print(eachline,)
handle.close()
```

## 12 错误和异常

```python
 try:
     handle2 = open('1.txt', mode= 'r')
     for eachline in handle:

         print(eachline,)
     handle.close
 except IOError e:
     print('file open error: %s' % e)
```

## 13 函数

> 函数中没有返回就自动返回 None 对象。Python 是通过引用调用，这意味着函数内对参数改变会影响到原始对象，
只对可变对象有影响，对应不可变对象是按照值调用的。
{: .prompt-info }

```python
def addMeToMe(x):
    return x + x

print(addMeToMe(1))
print(addMeToMe("123-"))

# 默认参数
def foo(debug=True):
    if debug:
        print("in debug")
    print('done')

foo()
```

## 14 类

```python
class FooClass(object):
    # version
    version = 1.0

    def __init__(self, nm='Jack'):
        self.name = nm
        print('__init__ %s' % nm)

    def show_name(self):
        print('your name is %s' % self.name)
        print('my name is %s' % self.__class__.__name__)

    def show_version(self):
        print(self.version)

    @staticmethod # 不用 self 需要加 staticmethod
    def add_me_to_me(x):
        return x + x


f = FooClass()
f.show_name()
f.show_version()
print(f.add_me_to_me(1))
```

> Foo 类，object 是父类。__init__() 有一个特殊名字，所有名字开始和结束都有两个下划线的都是特殊方法。当一个类的实例被创建时 __init__() 会自动执行，在类的实例创建完毕后执行，类似构造器。__init__() 可以被当成是构造器，但它并不创建实例，仅仅是对象创建后执行的第一个方法，目的是执行一些该对象的必要初始化工作。name 是类的实例属性 仅仅在类的实例中存在，它并不是实际类本身的一部分
{: .prompt-info }

* name 是类的实例属性 仅仅在类的实例中存在，它并不是实际类本身的一部分

> __init__()需要一个默认参数 self。self 它是实例对象自身的引用，其他面向对象通常使用名为 this 的标识符。
{: .prompt-info }

* 一级缩进间空一行，二级缩进间空两行


## 15 模块
* 导入模块 import module_name
* 访问模块函数 module.function()
* 访问模块属性 module.variable

```python
import sys
sys.stdout.write('hello')
```

## 16 常用方法

```python
print(type(f))
# range(start, end) means [start, end)
for i in range(1,5):
    print(i)
```

# 第三章 基础

## 1 语句语法
* #表示之后的为注释
* 换行 \n
* 分号 ; 将两个语句连接在一行
* 冒号 : 将代码块的头和体分开
* 语句用缩进体系
* 不同的缩进深度分割不同的代码块
* Python 文件以模块的形式组织

> 反斜线 \ 继续上一行
{: .prompt-info }

```python
num = 10
num1 = 1
if num > 3 and \
num1 > 0:
    print("\\")

# 小括号可替代 \, 如果有小括号时推荐用小括号
a = (1,
     2)
print(a)
```

> 推荐使用 4 个空格宽度。没有缩进的代码是最高层次，被称为脚本的主体（main）部分
{: .prompt-info }


## 2 变量赋值
* 不支持 ++、-- 操作

> 对象是通过引用传递的，赋值时都是将对象的引用（并不是值）赋值给变量。与 C 不同赋值并不是当成一个表达式（可返回值），Python 赋值也不会返回任何值
{: .prompt-info }

### 多重赋值

```python
a = b = c = 1
```

### 多元赋值

```python
x, y, z = 1, 2, 'apple'
print(x)
print(y)
print(z)

x, y = 1, 2
x, y = y, x
print(x)
print(y)
```

> Python 是大小写敏感的，即 Foo 与 foo 不同
{: .prompt-info }

## 3 标识符
* _xxx 代表不用 'from module import *' 导入
* _xxx_ 系统定义名字
* _xxx 类中的私有变量名, 下划线开头表示私有的，不能在模块或类外使用


## 4 基本风格

```python
#/usr/bin/env python  # 1 起始行
"this is a module"   # 2 模块文档，介绍模块功能
import sys           # 3 模块导入，每个模块仅仅导入一次（当前模块被加载时），函数内代码不会执行，除非该函数在执行
debug = True     # 4 全局变量定义
class FooTest(object):  # 5 类定义，类文档 class.__doc__
    "Foo test"

def tests():       #6 函数定义，可通过 module.functionname() 执行
    foo = FooTest()
    if debug:
        print('run tests')

if __name__ == '__main__':  # 7 主程序, 可用于测试代码
    tests()
print(__name__)
print('after basic')
```

> 使用 __name__ 检测，如果模块是被导入的 __name__ 就是模块名称。如果模块是被执行的，__name__ 被设置为 __main__。
{: .prompt-info }

> 时刻记住，那些最高级别的代码即没有缩进的代码在模块导入时会被执行，所以安全做法是所有执行的代码都在函数中
{: .prompt-info }


## 5 内存管理
* 使用类似 oc 的引用计数

### 引用计数增加：
1. 对象创建
2. 别名 y = x
3. 传递给函数作为参数
4. 加入到数组中

### 引用计数减少
1. 离开作用域 比如函数调用完成
2. 赋值新的对象，旧对象减1
3. 别名被销毁 ，del y
4. 从数组中移除

### del 可以用于删除对象引用,表示从现有空间删除 bb

```python
aa = '1'
bb = aa
del bb
```

* Python 垃圾回收器实际是一个引用计数器和一个循环垃圾收集器，也检测那些引用计数大于 0 但需要销毁的对象

### 调试器 pdb
* 记录器 logging
* 性能测试器 profile、hotshot、cprofile
