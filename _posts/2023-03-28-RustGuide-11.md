---
layout: post
title: RustGuide-11
date: 2023-03-28 16:45:30.000000000 +09:00
categories: [Rust]
tags: [Rust]
---

# 14 cargo 和 crates.io

## 通过发布配置（release profile）来自定义构建
### 发布配置（release profile）
* 是预定义的
* 可以自定义：可使用不同配置，对代码编译拥有更多的控制
* 每个 profile 的配置都是独立于其他 profile 的

### cargo 主要有两种常见的 profile
* dev profile：适用于开发，执行 `cargo build` 命令时，执行的就是 dev profile
* release profile：适用于发布，执行 `cargo build --release`，执行的就是 release profile

### 自定义 profile
* 针对每个 profile，cargo 都提供了默认的配置
* 如果想自定义某个 profile 的配置
1. 可以在 Cargo.toml 里添加 [profile.xxx] 区域，在里边覆盖默认配置的子集
2. 不覆盖就使用默认的配置


```
// cargo.toml
// opt-level 用于 Rust 编译时对代码执行那种程度的优化，值范围是 0~3
// 优化程度越高，代码编译的时间越长

// 覆盖 dev profile 的 opt-level 值
[profile.dev] 
opt-level = 1


// 覆盖 release profile 的 opt-level 值
[profile.release]
opt-level = 3
```

> 对于每个配置的默认值和完整选项 [参考链接](https://doc.rust-lang.org/cargo)
{: .prompt-info }

## 在 https://crates.io 上发布库

## 通过 workspaces 组织大工程

## 从 https://crates.io 来安装库

## 使用自定义命令扩展 cargo






> 
{: .prompt-info }

