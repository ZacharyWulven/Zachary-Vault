---
layout: post
title: RustGuide-08
date: 2023-03-22 16:45:30.000000000 +09:00
categories: [Rust]
tags: [Rust]
---

# 11 编写自动化测试

## 编写和运行测试
* 测试：即是个函数，验证非测试代码的功能是否与预期一致

### 测试函数体内通常执行 3 个操作
1. 准备数据状态
2. 运行被测试的代码
3. Assert（断言）结果

### 测试函数使用 test 属性（attribute）进行标注
* attribute 就是一段 Rust 代码的元数据，不会改变被修饰代码的逻辑，只是对代码进行标注
* 在函数上加 `#[test]` 可以把函数变为测试函数

### 运行测试
* 使用 `cargo test` 命令运行所有的测试函数
1. Rust 会构建一个 Test Runner 可执行文件 
2. Test Runner 就会逐个调用标注了 test attribute 的函数，并报告其运行是否成功

* 当使用 cargo 创建 Library 项目时，会生成一个 test module，里面有一个现成的 test 函数，可以参照这个现成的 test 函数编写其他 test 函数




> 
{: .prompt-info }

