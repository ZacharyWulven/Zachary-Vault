---
layout: post
title: PythonCore-02
date: 2023-07-11 16:45:30.000000000 +09:00
categories: [Python]
tags: [Python]
---

# 第四章 Python 对象

## 1 Python 对象
* python 任何类型都是一个对象
* 所有 Python 对象都有三个特性：身份、类型和值
1. 身份：（地址）每一对象都有一个唯一的身份标识自己，任何对象身份可以使用内建函数 id() 来得到，这个值可以认为是对象的内存地址
2. 类型：可以用内建 type() 查看 Python 对象类型，type() 返回的是对象而不是简单的字符串
3. 值：对象表示的数据项

> 上边三个特性在对象被创建时候就被赋值，除了值其他俩都是只读的
{: .prompt-info }


> 所有类型对象的类型都是 type 它是所有 Python 类型的根和所有 Python 标准类的默认元类
{: .prompt-info }

* 0、0.0 None、""、{} 、[] 的布尔值都是 False

> None 是 Python 的 Null 对象，类似 C 的 void，相当于 NULL。None 没有任何属性，它是一个布尔值，总是 false
{: .prompt-info }


## 2 内部类型
* 代码对象：是编译过的 Python 源代码片段，是可执行对象，通过调用 compile() 可得到代码对象，代码对象可被 exec 命令或 eval() 函数执行
* 帧对象：表示执行 Python 的执行栈帧，包含在运行时所需要知道的所有信息，包括上一帧的连接，每次函数调用产生一个新的帧，每个帧对象都会相应创建一个 C 栈帧
* 跟踪记录对象：用到帧对象，跟踪异常
* 切片对象
1. sequence[start1:end1, start2:end2]
2. sequence[起始索引:结束索引:步进值]

## 3 标准类型操作符

```python
foo1 = 4.3
foo2 = foo1
print(foo1 is foo2)
```
* 这俩对象指向一个对象，对象的值是 4.3

```python
foo3 = 4.2
foo4 = 1.0 + 3.2
print(foo3 is foo4)
print(id(foo3))
print(id(foo4))
```

* 这俩对象指向一个对象，对象的值是 4.2

> 对象比较，Python 提供了 is 和 is not 测试两个对象是否指向同一个对象，a is b 等价于 id(a) == id(b)
{: .prompt-info }

> 整型和字符串对象是不可变的
{: .prompt-info }


## 4 type()

```python
print(type(foo4))
print(type(1.0))
```

* cmp() 用于比较两个对象 obj1 和 obj2, 如果对象是自定义的会调用 __cmp__()
1. obj1 < obj2 返回负整数
2. obj1 > obj2 返回正整数
3. obj1 == obj2 返回 0

## 5 str()

```python
print(str(1))
print(type(str(1)))
```

> python 不支持函数重载
{: .prompt-info }

```python
import types
num = 1
if type(num) == types.IntType:
    print('111')
```

## 6 可变性
* 可变对象：列表、字典
* 不可变对象：数字、字符串、元组

## 7 访问模型
* 直接存储：非容器类，如数字
* 顺序：字符串、列表、元组
* 映射：哈希键-值对，字典

## 8 不支持的类型
1. 不支持 char 或 byte 来保存一个字符或 8 位整型
2. 指针
3. int vs short vs long，Python 只用长整型
4. float ，Python 总是 Double


# 第五章

> 数字是直接存储，不可更改类型，变更数字会生成新的对象。Python 中变量更像一个指针指向装变量值的盒子。
{: .prompt-info }

## 1 删除一个变量用 del

```python
x = 1
del x
```

## 2 整型
* 布尔型：只有两个值 True 或 False
* 标准整型，即有符号的长整型
* 默认是 10 进制，八进制整型以 "0o" 开头，十六进制整型以 "0x" 开始

## 3 浮点数
* 类似 C 的 Double 类型，占 8 个字节（64位）
* 52 位表示底，11 个位表示指数，剩下一个位表示符号

```python
print(2e2) 
# 2 * 10^2
```

## 4 复数
* 虚数不能单独存在，它们总是和一个值为 0.0 的实数部分一起构成一个复数
* 复数由实数部分和虚数部分构成
* 实数部分和虚数部分都是浮点数  real+imagj

```python
a = 6.23+1.5j
print(a)
```


## 5 操作符

### 1 混合操作符
* 比如，相加时的类型转换：整型转浮点，非复数转复数

### 2 算术运算符

* 除法

```python
print(1 / 2)  # 真正的除法
print(1 // 2) # 地板除，只取整数部分
```

* 取余

```python
# x - (math.floor(x/y) * y)
print(3 % 10)
```

* 幂运算 \*\* 
1. 幂运算操作符比其左侧操作数的一元操作符优先级低，比其右侧操作数的一元操作符优先级高

```python
print(-3 ** 2) 
# -9
```

* 位运算（只使用与整型）

> 优先级 取反(~) > 左移或右移 > and 、or、^（亦或）
{: .prompt-info }

## 6 内建函数

```python
print(int(1.0))
print(float(1))
print(bool(3))
```

* divmod 将返回一个包含商和余数的元组

```python
b = divmod(3, 10)
print(b)
```

* pow() 类似 ** 但有区别
1. pow 还接受第三个可选参数，即余数，pow 会先进行指数运算，然后将运算结果和第三个参数进行取余，这个特性主要用于密码学，比 pow(x,y) % z 性能更好

```python
c = pow(2, 2)
print(c)
```

* round() 四舍五入

```python
d = round(1.45)
print(d) # 1
```

### 下边只适用于整型

#### 进制转换

```python
# oct() 八进制
print(oct(20))

# hex() 十六进制
print(hex(255))
```

#### ASCII 转换

```python
# ord()
print(ord('a'))

# chr()
print(chr(65))
```

## 7 其他数字类型

> 布尔是整型的子类，但不能再被继承。没有 __nonzero__() 方法的对象 默认是 True。对于 0 空集合等 都是 False。在数学运算中 True == 1，False == 0
{: .prompt-info }
