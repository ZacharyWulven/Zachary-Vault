---
layout: post
title: CppGuide-03
date: 2025-01-15 16:45:30.000000000 +09:00
categories: [C++]
tags: [C++]
---


# C++ 静态数组 `std::array`
* C++ 标准库模版库提供，不能改变其大小
* `std::array` 与 C 语言风格是一样的，都存储在栈上。`vector` 存储在堆上
* `std::array`优点：
  1. 它帮助我们维护了 `size`，`size` 是构造时候传入的数量，不会有 `size` 计算属性
  2. 它有边界检查，指定 Debug 或 Release 模式生效与否


```c++
template <typename T, int N>
void PrintArray(std::array<T, N> array)
{
    for (auto it = array.begin(); it != array.end(); it++) {
        std::cout << *it << std::endl;
    }
}

int main(int argc, const char * argv[]) {        
    std::cout << "静态数组 std::array" << std::endl;
    /*
     std::array 与 C 语言风格是一样的
     */
    std::array<int, 5> data;
    data[0] = 2;
    data[3] = 1;
    data[4] = 4;

    PrintArray<int, 5>(data);
    
    // C 语言风格
    int dataOld[5];
    dataOld[0] = 0;
    
    return 0;
}
```

# C++ 函数指针

## (C 语言)原始函数指针（raw function pointer）

* `auto` 关键字对于函数指针很有用

```c++
#include <iostream>

void HelloWorld(int a)
{
    std::cout << "Hello, World! Value: " << a << std::endl;
}

int main(int argc, const char * argv[]) {
    
    // function type is void (*)()    (FunctionPointer`HelloWorld() at main.cpp:11)
    auto function = HelloWorld; // 获取 HelloWorld 地址, 这里有个隐式 &
    function(0);
    function(1);

    // 实际类型: void (*)()
    void(*func)(int) = HelloWorld;
    func(2);
    
    // use typedef
    typedef void(*HelloWorldFunction)(int);

    HelloWorldFunction h = HelloWorld;
    h(3);
    
    
    return 0;
}
```

### 函数指针作为函数参数


```c++
#include <iostream>
#include <vector>

void PrintValue(int a)
{
    std::cout << "Print Value: " << a << std::endl;
}

void ForEach(const std::vector<int>& values, void(*func)(int))
{
    for (int value: values) {
        func(value);
    }
}

int main(int argc, const char * argv[]) {
    
    std::vector<int> values = {1, 5, 4, 2, 3};
    ForEach(values, PrintValue);
    // [] 叫捕获方式
    ForEach(values, [](int value){
        std::cout << "Lambda Value: " << value << std::endl;
    });

    return 0;
}
```

# `lambda` 匿名函数
* `lambda`: 就是一个普通函数，它是我们代码在运行中生成的，用完就废弃，不算一个真正的函数，是匿名函数
