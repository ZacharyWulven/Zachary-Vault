---
layout: post
title: Java-Core-01
date: 2024-12-09 16:45:30.000000000 +09:00
categories: [JAVA]
tags: [JAVA]
---


# 一 Java 概述

## 简单性
* Java 剔除了 C++ 中许多很少使用，难以理解，容易混淆的特性
* Java 里没有头文件、指针运算（甚至没有指针语法）、结构、联合、操作符重载、虚基类等
* 本质上 JAVA 的面向对象能力与 C++ 是一样的
* 与 C++ 相比 Java 提供了更丰富的运行时自省功能


> Java 与 C++ 主要不同点在于多重继承。在 Java 中取而代之的是更简单的接口概念
{: .prompt-info }

* Java 中的 `int` 总是 32 位. 在 C/C++ 中 int 类型的字节数不能低于 short int 并且不能高于 long int


> 在 Java 中，数值类型有固定的字节数，这消除了代码移植时一个令人头痛的主要问题
{: .prompt-info }

* 二进制数据以固定格式进行存储和传输，消除了有关字节顺序的困扰。字符串则采用 Unicode 格式存储。


# 二 Java 编程环境

[下载 JDK](https://www.oracle.com/java/technologies/downloads/)


## Java 术语

![image](/assets/images/java/JDK.png)

## 设置 JDK

* JDK 安装位置 `/Library/Java/JavaVirtualMachines/jdk-23.jdk/Contents/Home`

* Linux 需要修改 `~/.bashrc` 或 `~/.bash_profile` 或 `.zshrc`: `export PATH="/Library/Java/JavaVirtualMachines/jdk-23.jdk/Contents/Home/bin:$PATH"`


* 查看安装是否成功

```shell
$ javac --version
```

### 安装源文件和文档
* 在主目录创建 `javasrc` 目录，
* 在 `JDK/lib` 下找到 `src.zip`，将其解压到 `javasrc` 目录
* `https://openjdk.org/` 可获得更多源代码
* 下载文档 `https://www.oracle.com/java/technologies/downloads/#jdk23-mac`
    - 文件名：`jdk-23.0.2_doc-all.zip`

* 下载 Core Java 书的示例代码：`https://horstmann.com/corejava/` 中的 `corejava.zip`


### Java Home（可选）

```shell
$ vim .zshrc

# 输入
# Java
export JAVA_HOME=$(/usr/libexec/java_home)
```


## 使用命令行工具

### 编译: `javac <file name>.java`

```shell
$ javac Welcom.java
```

### 运行 `java <file name>`

```
$ java Welcom
```

* `javac` 是一个 Java 编译器，它将 `Welcom.java` 编译成 `Welcom.class`
* `java` 程序启动 Java 虚拟机，虚拟机执行编译器编译得到的类文件的字节码

### JShell

```
$ jshell


➜ jshell
|  欢迎使用 JShell -- 版本 23.0.1
|  要大致了解该版本, 请键入: /help intro

jshell> "Core Java".length()
$1 ==> 9

jshell>

jshell> 3 * $1
$2 ==> 27

jshell> int a = 3
a ==> 3

jshell> a * 3
$4 ==> 9

jshell>
```

* jshell 会自动打印你输入的每一个表达式的值


## 集成开发工具
* 使用 `VSCode`，下载 `Extension Pack for Java`
* 或使用 `Eclipse` 或 `IntelliJ IDEA` 或 `NetBeans`

 
# 三 Java 的基本程序设计结构

## 一个简单的程序

```java
public class Welcome
{
   public static void main(String[] args)
   {
      String greeting = "Welcome to Core Java!";
      System.out.println(greeting);
      for (int i = 0; i < greeting.length(); i++)
         System.out.print("=");  // 打印后，不换行
      System.out.println();      // 打印一个空行
   }
}
```

* 首先 Java 区分大小写
* `xxx.class` 为编译后的字节码文件
* 要以其他退出码终止程序，需要使用 `System.exit` 方法
* 通用语法：`object.method(parameters)`


> `Class` 是所有 Java 应用的构建模块，Java 程序中所有内容都必须放在 `Class` 中。每个 Java 应用都必须包含一个 `main` 方法, `main` 方法必须是 `public`，`main` 方法总是静态的
{: .prompt-info }


## 注释

> Java 中，`/* */` 注释不能嵌套
{: .prompt-info }

## 数据类型
* Java 是强类型语言
* `char` 字符类型，表示 `Unicode` 编码的代码单元

> Java 有一个能表示任意精度的算术包，叫 `大数（big number）`，是 Java 对象，而不是基础类型
{: .prompt-info }

### 整型
1. `int`, 4 字节，最常用
2. `short`, 2 字节，用于特定应用场合
3. `long`, 8 字节，int 不够时使用
4. `byte`, 1 字节，用于特定应用场合


> 在 Java 中整型的范围与运行 Java 代码的机器无关。这就解决了从一个平台移植到另一个平台时让程序员头疼的问题。`Java 中各种数据类型的取值范围是固定的`。
{: .prompt-info }


* 长整型有一个 `L 或 l` 后缀: 例如 `400L`
* 十六进制有 `0x 或 0X` 前缀: 例如 `0xCAFE`
* 八进制有 `0` 前缀: 例如 `010`
* 二进制有 `0b 或 0B` 前缀: `0b1111_0100`

> `在 Java 中没有无符号（Unsigned）形式的 int long short 或 byte 类型`
{: .prompt-info }

* 需要调用 `Byte.toUnsignedInt(b)` 来得到一个 `0-255` 的 int 值。Integer 和 Long 也提供类似的方法

### 浮点类型
1. `float`, 4 字节，精度为 `6-7` 位有效数字，有 `f 或 F` 后缀：例如 `3.14f`
1. `double`, 8 字节，默认浮点类型，有 `d 或 D` 后缀


> 浮点类型默认是 `double`。没有后缀 `f 或 F` 都是默认类型
{: .prompt-info }

> 正整数除以 0 的结果为正无穷大，`0/0` 或负数的平方根结果为 `NaN`(不是一个数)
{: .prompt-info }


```java
// 不能如下判断一个值是不是 NaN
if (x == Double.NaN) // is never true

// 所有的 NaN 值都认为是不相等的, 可以用 Double.isNaN 方法来判断
if (Double.isNaN(x)) // check whether x is "not a number"

```

> 所有的 NaN 值都认为是不相等的, 可以用 Double.isNaN 方法来判断
{: .prompt-info }


### char 类型
* 有些 Unicode 字符可以用一个 char 值描述，而有些Unicode 字符需要用两个 char 值描述
* char 类型字面量需要用单引号。如 `'A'` 是编码值为 65 的字符常量，而 `"A"` 是包含一个字符的字符串
* char 类型可以表示为十六进制值，其范围为 `\u0000~\uFFFF`

#### Unicode 与 char 类型
* 码点（code point）：指与一个编码表中的某个字符对应的代码值
* 在 Unicode 标准中，码点采用十六进制书写，并加上前缀 `U+`, 例如 `U+0041`
* Unicode 码点分为 17 哥代码平面
    - 第一个代码平面称为：基本多语言平面，范围 `U+0000~U+FFFF`
    - 其余 16 个平面包含各种辅助字符, 范围 `U+10000~U+10FFFF`

> 在 Java 中，char 类型描述了采用 `UTF-16` 编码的一个代码单元。强烈建议不要在程序中使用 char 类型，除非确实要处理 `UTF-16` 代码单元
{: .prompt-info }

### boolean 类型

* 在 C++ 中，数值甚至指针可以代替布尔值，0 相当与 false，非 0 相当与 true。在 Java 中则不行

> 整型值与布尔值之间不能进行相互转换
{: .prompt-info }


## 变量与常量

### 初始化变量

```java
public class Demo
{
   public static void main(String[] args)
   {
      // 声明，Java 中不区分变量声明和定义
      var days = 12;
      double salary = 50.0;

      System.out.println(days);
      System.out.println(salary);
   }
}
```

> Note：不要使用未初始化的变量的值。Java 中不区分变量声明和定义
{: .prompt-info }


### 常量
* Java 中常量必须使用关键字 `final`
* `final` 表示这个变量只能被赋值一次，一旦赋值，就不能再更改了。常量全用大写

```java
public class Demo
{
   // 类常量
   public static final double CM_PER_INCH = 2.54; 
       
   public static void main(String[] args)
   {
      // 常量
      final double CM_PER_INCH_INNER = 2.54; 
      System.out.println(CM_PER_INCH_INNER);
      System.out.println(Demo.CM_PER_INCH);
   }
}
```

### 枚举类型

```java
public class Demo
{
   public static void main(String[] args)
   {
      Size size = Size.LARGE;
      size = null; // null 表示没有设置任何值
      System.out.println(size);
   }
}

enum Size 
{
   SMALL,
   MEDIUM,
   LARGE,
}
```


## 运算符

### 算术运算符

> Note：整数被 0 除将产生一个异常，而浮点数被 0 除将会得到一个无穷大或 NaN 的结果
{: .prompt-info }


### 数值类型之间的转换

![image](/assets/images/java/tr.png)

* 6 个实线箭头，表示无信息丢失的转换
* 3 个虚线箭头，表示可能有精度损失的转换
* 当一个二元运算符连接两个值 `n+f` (n 是整数，f 是浮点数)，先要将两个操作数转为同一类型
    - 如果两个数有一个是 double 类型，另一个数会转换为 double 类型
    - 否则，如果一个是 float 类型，另一个数会转换为 float 类型
    - 否则，如果一个是 long 类型，另一个数会转换为 long 类型
    - 否则，两个数都将被转换为 int 类型

### 强制类型转换（使用小括号）

```java
      double x = 9.9;
      int nx = (int)x;
      System.out.println(nx);
      
      int nxx = (int)Math.round(x);
      System.out.println(nxx);
```

> Note: 不要在布尔类型与任何数值类型之间进行强制转换。可以使用 `bool ? 1 : 0`
{: .prompt-info }


### 赋值

```java
      int x = 1;
      int y = x += 4; // 表达式 x += 4 的值是 5，y is 5
```

> Java 中，赋值表达式它有一个值，具体就是它所赋的那个值。有时像上边那样做代码可读性差，建议不要这样。
{: .prompt-info }


